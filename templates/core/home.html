{% extends "base.html" %}
{% load static %}
{% block title %}Trang dành cho khách hàng{% endblock %}

{% block content %}

<section class="hero-banner full-bleed">
  <div class="hero-bg-clear" style="background-image: url('{% static "img/tdtu_background.jpg" %}');"></div>
  <div class="hero-bg-blur"  style="background-image: url('{% static "img/tdtu_background.jpg" %}');"></div>
  <div class="hero-overlay"></div>

  <div class="hero-banner__inner">
    <div class="hero-banner__left">

      <!-- PANEL INTRO -->
      <div class="panel panel-show" id="panel-intro">
        <div class="hero-kicker">ĐỒ ÁN TỔNG HỢP</div>
        <h1 class="hero-title">Hệ thống sắp xếp và làm sạch chai nước</h1>
        <p class="hero-desc">
          Hệ thống gồm ba quy trình chính: dựng chai – phân loại theo chiều cao – rửa chai.
          Đây là trang web để người dùng đặt hàng và ghi nhận lịch sử đơn đặt hàng.
        </p>
        <div class="cta-row cta-separated">
          <!--<a class="btn btn-primary btn-big btn-bounce" href="/order/">Đặt hàng ngay</a>-->
          {% if request.user.is_authenticated %}
            <a class="btn btn-primary btn-big btn-bounce" href="{% url 'order' %}">Đặt hàng ngay</a>
          {% else %}
            <button type="button"
              class="btn btn-primary btn-big btn-bounce"
              id="requireLoginBtn">Đặt hàng ngay
            </button>
          {% endif %}
        </div>
      </div>

      <!-- PANEL PRICING -->
      <div class="panel panel-hide" id="panel-pricing">
        <div class="hero-kicker">BẢNG GIÁ</div>
        <h2 class="hero-title hero-title--sm">Giá rửa cho từng loại chai</h2>
        <p class="hero-desc">Chọn loại chai để xem chi phí rửa tương ứng.</p>

      <div class="price-wrap">
        <div class="price-grid price-grid--wide">

          <div class="price-card price-card--wide">
            <div class="badge">Chai thấp</div>
            <div class="price">60đ</div>
            <div class="sub">/ chai</div>
          </div>

          <div class="price-card price-card--wide">
            <div class="badge">Chai cao</div>
            <div class="price">70đ</div>
            <div class="sub">/ chai</div>
          </div>

        </div>
      </div>
    </div>


      <!-- PANEL CONTACT -->
      <div class="panel panel-hide" id="panel-contact">
        <div class="hero-kicker">LIÊN HỆ</div>
        <h2 class="hero-title hero-title--sm">Nhóm thực hiện</h2>

        <div class="contact-card">
          <div><b>Bùi Nguyễn Ngọc Bảo</b> — MSSV: 42101371</div>
          <div><b>Võ Duy Tân</b> — MSSV: 42100462</div>
          <div><b>Tạ Nguyễn Quý Dương</b> — MSSV: 42101384</div>
        </div>
      </div>

    </div>
  </div>
</section>

<div class="login-required-modal" id="loginRequiredModal">
  <div class="login-required-content">
    <h3>Yêu cầu đăng nhập</h3>
    <p>Bạn cần đăng nhập trước khi đặt hàng.</p>
    <div class="modal-actions">
      <a href="{% url 'login' %}" class="btn btn-primary">Đăng nhập</a>
      <button class="btn btn-ghost" id="closeLoginModal">Đóng</button>
    </div>
  </div>
</div>

{% block scripts %}
<!-- MODAL THÔNG BÁO ĐĂNG NHẬP TRƯỚC KHI ĐẶT HÀNG -->
<script>
const requireBtn = document.getElementById("requireLoginBtn");
const modal = document.getElementById("loginRequiredModal");
const closeBtn = document.getElementById("closeLoginModal");

if(requireBtn){
  requireBtn.addEventListener("click", () => {
    modal.classList.add("active");
  });
}

if(closeBtn){
  closeBtn.addEventListener("click", () => {
    modal.classList.remove("active");
  });
}

modal?.addEventListener("click", (e) => {
  if(e.target === modal){
    modal.classList.remove("active");
  }
});
</script>
{% endblock %}
{% endblock %}


