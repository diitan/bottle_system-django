{% extends "base.html" %}
{% block title %}Quên mật khẩu{% endblock %}
{% block content %}

<div class="card">
  <h2>Quên mật khẩu</h2>

  {% for m in messages %}
    <div class="msg {% if m.tags == 'success' %}msg-ok{% else %}msg-error{% endif %}">{{ m }}</div>
  {% endfor %}

  {% if step == 1 %}
    <form method="post">
      {% csrf_token %}
      <input type="hidden" name="step" value="1">
      <label>Nhập email</label>
      <input name="email" value="{{ email|default:'' }}" required>
      <button class="btn btn-primary" type="submit">Xác nhận</button>
    </form>
  {% else %}
    <p>Email đúng. Nhập mật khẩu mới:</p>
    <form method="post">
      {% csrf_token %}
      <input type="hidden" name="step" value="2">
      <input type="hidden" name="email" value="{{ email }}">
      <label>Mật khẩu mới</label>
      <input name="password1" type="password" required>
      <label>Xác nhận mật khẩu mới</label>
      <input name="password2" type="password" required>
      <button class="btn btn-primary" type="submit">Đặt lại</button>
    </form>
  {% endif %}
</div>

{% endblock %}
